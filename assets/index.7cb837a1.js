import{r as w,c as _,a as f,s as y,S as C}from"./right.5a1989d9.js";import{m as x}from"./logo.85541aea.js";import{l as D,t as k}from"./header.7b982a1c.js";import{r as M,L as S,F as B,B as P,U as L,D as E}from"./Down.4e4870ff.js";import{_ as F,r as u,h as R,o as m,c as p,a as h,b as e,F as T,d as N,t as H,e as g,w as A}from"./index.a35dd34e.js";const I={name:"previewmodel",data(){return{ploading:!0,pathname:"1.glb",meuns:[]}},components:{right:w,loading:D,topheader:k},methods:{async previewmodelHandle(o){this.ploading=!0,this.pathname=o},async DownloadmodelHandle(o){this.pathname=o,this.downloadFile("./modelimg/"+o)},generateRandomString(o=30){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let d="";for(let n=0;n<o;n++){const l=Math.floor(Math.random()*t.length);d+=t[l]}return d+".glb"},downloadFile(o){const t=document.createElement("a");t.href=o,t.download=this.generateRandomString(),document.body.appendChild(t),t.click(),document.body.removeChild(t)},initEarth(){window.viewer.scene.globe.tileLoadProgressEvent.addEventListener(o=>{o.numberOfTilesLoaded===o.numberOfTilesWaiting&&(this.ploading=!1)})},async loadModel(o){const{scene:t,camera:d,clock:n}=viewer,l=0,s=new Cesium.HeadingPitchRoll(0,0,0),r=Cesium.Cartesian3.fromDegrees(-123.0744619,44.0503706,l),c=Cesium.Transforms.headingPitchRollToFixedFrame(r,s);try{let a=await Cesium.Model.fromGltfAsync({url:"./modelimg/"+o,modelMatrix:c});t.primitives.removeAll(),t.primitives.add(a),a.readyEvent.addEventListener(()=>{this.zoomToModel(a)})}catch(a){window.alert(`Error loading model: ${a}`)}},initmap(){let o=new Cesium.SkyBox({sources:{positiveX:M,negativeX:S,positiveY:B,negativeY:P,positiveZ:L,negativeZ:E}});const t=new Cesium.Viewer("PriviewMapContainer",{animation:!1,geocoder:!1,homeButton:!1,fullscreenButton:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1,skyBox:o,timeline:!1,imageryProvider:new Cesium.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),useBrowserRecommendedResolution:!1});window.viewer=t,this.initEarth(),this.loadModel(this.pathname)},zoomToModel(o){const{scene:t,camera:d,clock:n}=viewer,l=t.screenSpaceCameraController;l.minimumZoomDistance=d.frustum.near,l._minimumRotateRate=1;let{radius:s}=o.boundingSphere;if(s<10){const a=10/s;Cesium.Matrix4.multiplyByUniformScale(o.modelMatrix,a,o.modelMatrix),s*=a}const r=Cesium.Math.toRadians(270),c=0;d.lookAt(o.boundingSphere.center,new Cesium.HeadingPitchRange(r,c,s*3))}},mounted(){x.main(),_.custom(),f.ratycustom(),y.slimScroll(),C.SearchFilter(),this.initmap()},computed:{getMeuns(){return window.UIConfig.model}},watch:{getMeuns:{handler(o){this.meuns=o},deep:!0,immediate:!0}}},U={style:{height:"100%"}},V={class:"page-wrapper"},G={class:"main-container main-containermax"},O={class:"content-wrapper-scroll"},Z={class:"content-wrapper"},$={class:"content-wrapper"},z={class:"row gutters"},W={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},X={class:"card"},Y={class:"card-body"},j={class:"row gutters"},q={class:"doc-block"},J={class:"doc-icon"},K=["src","alt"],Q={class:"doc-title"},ee={class:"custom-btn-group mt-2"},te=["disabled","onClick"],oe=["disabled","onClick"],se={class:"modal fade",id:"previewmodel","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addNewDocumentLabel","aria-hidden":"true"},ae={class:"modal-dialog modal-lg",role:"document"},le={class:"modal-content"},ie={class:"modal-body"},de={style:{overflow:"hidden",height:"100%"}},ne={class:"modal-footer"},re=["onClick"];function ce(o,t,d,n,l,s){const r=u("loading"),c=u("right"),a=u("topheader"),b=R("loading");return m(),p("div",U,[h(r),e("div",V,[h(c),e("div",G,[h(a),e("div",O,[e("div",Z,[e("div",$,[e("div",z,[e("div",W,[e("div",X,[t[5]||(t[5]=e("div",{class:"card-header-lg"},[e("h4",null,"Documents"),e("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addNewDocument"}," Create Document "),e("div",{class:"modal fade",id:"addNewDocument","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addNewDocumentLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-lg",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addNewDocumentLabel"}," Add Document "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"})])]),e("div",{class:"modal-body"},[e("form",{class:"row gutters"},[e("div",{class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[e("div",{class:"field-wrapper"},[e("input",{type:"text",class:"form-control"}),e("div",{class:"field-placeholder"}," Document Title ")])]),e("div",{class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[e("div",{class:"field-wrapper"},[e("select",{class:"select-single js-states",title:"Select Product Category","data-live-search":"true"},[e("option",null,"Pdf"),e("option",null,"Excel"),e("option",null,"PPT")]),e("div",{class:"field-placeholder"}," Document Type ")])]),e("div",{class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"},[e("div",{class:"field-wrapper"},[e("div",{class:"input-group"},[e("input",{type:"text",class:"form-control datepicker-opens-left"}),e("span",{class:"input-group-text"},[e("i",{class:"icon-calendar1"})])]),e("div",{class:"field-placeholder"}," Created On ")])]),e("div",{class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[e("div",{class:"field-wrapper m-0"},[e("textarea",{class:"form-control",rows:"3"}),e("div",{class:"field-placeholder"}," Description ")])])])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"}," Close "),e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")])])])])],-1)),e("div",Y,[e("div",j,[(m(!0),p(T,null,N(l.meuns,i=>(m(),p("div",{key:i.title,class:"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12"},[e("div",q,[e("div",J,[e("img",{src:"./modelimg/"+i.img,alt:i.title},null,8,K)]),e("div",Q,H(i.title),1),e("div",ee,[e("button",{disabled:!i.Download,"data-bs-placement":"bottom","data-bs-toggle":"tooltip","data-bs-original-title":"\u4E0B\u8F7D\u6A21\u578B",onClick:v=>s.DownloadmodelHandle(i.path),class:"btn btn-info stripes-btn"},t[0]||(t[0]=[e("i",{class:"icon-download"},null,-1),g(" Download ")]),8,te),e("button",{disabled:!i.preview,"data-bs-placement":"bottom","data-bs-toggle":"modal","data-bs-target":"#previewmodel","data-bs-original-title":"\u9884\u89C8\u6A21\u578B",onClick:v=>s.previewmodelHandle(i.path),class:"btn btn-outline-primary"},t[1]||(t[1]=[e("i",{class:"icon-codepen"},null,-1),g(" preview ")]),8,oe),e("div",se,[e("div",ae,[e("div",le,[t[4]||(t[4]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addNewDocumentLabel"}," \u6A21\u578B\u9884\u89C8 "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"})])],-1)),e("div",ie,[A((m(),p("div",de,t[2]||(t[2]=[e("div",{id:"PriviewMapContainer"},null,-1)]))),[[b,l.ploading]])]),e("div",ne,[t[3]||(t[3]=e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"}," Close ",-1)),e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:v=>s.DownloadmodelHandle(i.path)}," Download ",8,re)])])])])])])]))),128))])])])])])])]),t[6]||(t[6]=e("div",{class:"app-footer"},"\xA9 Uni Pro Admin 2021",-1))])])])])}const ge=F(I,[["render",ce]]);export{ge as default};
